{"version":3,"file":"simple-test.js","sources":["../../src/content/simple-translation-test.ts"],"sourcesContent":["// 简化的翻译测试脚本\r\nconsole.log('Simple Translation Test: Starting...');\r\n\r\n// 等待页面加载\r\nfunction waitForLoad() {\r\n  if (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', injectSimpleTranslations);\r\n  } else {\r\n    injectSimpleTranslations();\r\n  }\r\n}\r\n\r\nfunction injectSimpleTranslations() {\r\n  console.log('Simple Translation Test: Injecting translations...');\r\n  \r\n  // 定义简单的翻译映射\r\n  const translations = [\r\n    { selector: 'label', text: 'Surnames', translation: '姓氏（与护照一致）' },\r\n    { selector: 'label', text: 'Given Names', translation: '名字（与护照一致）' },\r\n    { selector: 'label', text: 'Full Name in Native Alphabet', translation: '本地字母的全名' }\r\n  ];\r\n  \r\n  // 查找并注入翻译\r\n  translations.forEach(({ selector, text, translation }) => {\r\n    const labels = document.querySelectorAll(selector);\r\n    console.log(`Simple Translation Test: Found ${labels.length} ${selector} elements`);\r\n    \r\n    labels.forEach(label => {\r\n      if (label.textContent && label.textContent.includes(text)) {\r\n        console.log(`Simple Translation Test: Found \"${text}\" label, injecting translation`);\r\n        \r\n        // 创建翻译元素\r\n        const translationSpan = document.createElement('span');\r\n        translationSpan.style.cssText = `\r\n          margin-left: 8px;\r\n          color: #666;\r\n          font-size: 13px;\r\n          background: rgba(59, 130, 246, 0.1);\r\n          padding: 2px 6px;\r\n          border-radius: 4px;\r\n          border: 1px solid rgba(59, 130, 246, 0.2);\r\n        `;\r\n        translationSpan.textContent = translation;\r\n        translationSpan.className = 'ds160-simple-translation';\r\n        \r\n        // 检查是否已经添加过翻译\r\n        if (!label.querySelector('.ds160-simple-translation')) {\r\n          label.appendChild(translationSpan);\r\n          console.log(`Simple Translation Test: Successfully injected \"${translation}\"`);\r\n        }\r\n      }\r\n    });\r\n  });\r\n  \r\n  // 统计注入的翻译数量\r\n  const injectedCount = document.querySelectorAll('.ds160-simple-translation').length;\r\n  console.log(`Simple Translation Test: Total translations injected: ${injectedCount}`);\r\n}\r\n\r\n// 监听来自popup的消息\r\nchrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\r\n  console.log('Simple Translation Test: Received message:', message);\r\n  \r\n  if (message.type === 'GET_TRANSLATION_STATUS') {\r\n    const injectedCount = document.querySelectorAll('.ds160-simple-translation').length;\r\n    sendResponse({\r\n      initialized: true,\r\n      enabled: true,\r\n      translatedCount: injectedCount,\r\n      pageType: 'simple-test',\r\n      debug: true,\r\n      url: window.location.href,\r\n      title: document.title\r\n    });\r\n  }\r\n  \r\n  return true;\r\n});\r\n\r\n// 启动\r\nwaitForLoad();\r\n\r\nconsole.log('Simple Translation Test: Script loaded');\r\n\r\nexport {};\r\n"],"names":[],"mappings":"AACA,QAAQ,IAAI,sCAAsC;AAGlD,SAAS,cAAc;AACrB,MAAI,SAAS,eAAe,WAAW;AACrC,aAAS,iBAAiB,oBAAoB,wBAAwB;AAAA,EACxE,OAAO;AACL,6BAAA;AAAA,EACF;AACF;AAEA,SAAS,2BAA2B;AAClC,UAAQ,IAAI,oDAAoD;AAGhE,QAAM,eAAe;AAAA,IACnB,EAAE,UAAU,SAAS,MAAM,YAAY,aAAa,YAAA;AAAA,IACpD,EAAE,UAAU,SAAS,MAAM,eAAe,aAAa,YAAA;AAAA,IACvD,EAAE,UAAU,SAAS,MAAM,gCAAgC,aAAa,UAAA;AAAA,EAAU;AAIpF,eAAa,QAAQ,CAAC,EAAE,UAAU,MAAM,kBAAkB;AACxD,UAAM,SAAS,SAAS,iBAAiB,QAAQ;AACjD,YAAQ,IAAI,kCAAkC,OAAO,MAAM,IAAI,QAAQ,WAAW;AAElF,WAAO,QAAQ,CAAA,UAAS;AACtB,UAAI,MAAM,eAAe,MAAM,YAAY,SAAS,IAAI,GAAG;AACzD,gBAAQ,IAAI,mCAAmC,IAAI,gCAAgC;AAGnF,cAAM,kBAAkB,SAAS,cAAc,MAAM;AACrD,wBAAgB,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAShC,wBAAgB,cAAc;AAC9B,wBAAgB,YAAY;AAG5B,YAAI,CAAC,MAAM,cAAc,2BAA2B,GAAG;AACrD,gBAAM,YAAY,eAAe;AACjC,kBAAQ,IAAI,mDAAmD,WAAW,GAAG;AAAA,QAC/E;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH,CAAC;AAGD,QAAM,gBAAgB,SAAS,iBAAiB,2BAA2B,EAAE;AAC7E,UAAQ,IAAI,yDAAyD,aAAa,EAAE;AACtF;AAGA,OAAO,QAAQ,UAAU,YAAY,CAAC,SAAS,QAAQ,iBAAiB;AACtE,UAAQ,IAAI,8CAA8C,OAAO;AAEjE,MAAI,QAAQ,SAAS,0BAA0B;AAC7C,UAAM,gBAAgB,SAAS,iBAAiB,2BAA2B,EAAE;AAC7E,iBAAa;AAAA,MACX,aAAa;AAAA,MACb,SAAS;AAAA,MACT,iBAAiB;AAAA,MACjB,UAAU;AAAA,MACV,OAAO;AAAA,MACP,KAAK,OAAO,SAAS;AAAA,MACrB,OAAO,SAAS;AAAA,IAAA,CACjB;AAAA,EACH;AAEA,SAAO;AACT,CAAC;AAGD,YAAA;AAEA,QAAQ,IAAI,wCAAwC;"}